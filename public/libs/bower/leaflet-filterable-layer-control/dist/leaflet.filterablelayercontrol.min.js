/*! Version: 0.4.0
Date: 2016-03-22 */

L.Control.FilterableLayers=L.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){L.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){var b=L.stamp(a);return delete this._layers[b],this._update(),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=L.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),L.Browser.touch?L.DomEvent.on(b,"click",L.DomEvent.stopPropagation):L.DomEvent.disableClickPropagation(b).disableScrollPropagation(b);var c=this._form=L.DomUtil.create("form",a+"-list");if(this.options.collapsed){L.Browser.android||L.DomEvent.on(b,"mouseover",this._expand,this).on(b,"mouseout",this._collapse,this);var d=this._layersLink=L.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",L.Browser.touch?L.DomEvent.on(d,"click",L.DomEvent.stop).on(d,"click",this._expand,this):L.DomEvent.on(d,"focus",this._expand,this),L.DomEvent.on(c,"click",function(){setTimeout(L.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._inputFilter=L.DomUtil.create("input",a+"-filter",c),L.DomEvent.on(this._inputFilter,"keyup",this._onInputFilterChange,this),this._separator=L.DomUtil.create("div",a+"-separator",c),this._baseLayersList=L.DomUtil.create("div",a+"-base",c),this._separator=L.DomUtil.create("div",a+"-separator",c),this._overlaysList=L.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){var d=L.stamp(a);this._layers[d]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var a,b,c=!1,d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay;this._separator.style.display=d&&c?"":"none"}},_onLayerChange:function(a){var b=this._layers[L.stamp(a.layer)];if(b){this._handlingClick||this._update();var c=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)}},_createRadioElement:function(a,b){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(c+=' checked="checked"'),c+="/>";var d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(a){var b,c=document.createElement("label"),d=this._map.hasLayer(a.layer);a.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=d):b=this._createRadioElement("leaflet-base-layers",d),b.layerId=L.stamp(a.layer),L.DomEvent.on(b,"click",this._onInputClick,this);var e=document.createElement("span");e.innerHTML=" "+a.name,c.appendChild(b),c.appendChild(e);var f=a.overlay?this._overlaysList:this._baseLayersList;return f.appendChild(c),c},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length,f=!1;for(this._handlingClick=!0,a=0;e>a;a++)b=d[a],c=this._layers[b.layerId],c&&b.checked&&!this._map.hasLayer(c.layer)?(this._map.addLayer(c.layer),f=!0):c&&!b.checked&&this._map.hasLayer(c.layer)&&(this._map.removeLayer(c.layer),f=!0);this._handlingClick=!1,f&&this._refocusOnMap()},_onInputFilterChange:function(){console.log("Me here");var a=this.getContainer().getElementsByClassName("leaflet-control-layers-selector"),b=new RegExp(this._inputFilter.value,"i");for(var c in a)if(isFinite(c)){var d=a[c];d.parentNode.style.display="block",b.test(d.parentNode.textContent)||(d.parentNode.style.display="none")}},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),L.control.FilterableLayers=function(a,b,c){return new L.Control.FilterableLayers(a,b,c)};
//# sourceMappingURL=leaflet.filterablelayercontrol.min.js.map